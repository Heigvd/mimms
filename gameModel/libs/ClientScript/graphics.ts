import { add, interpolate, normalize, Point } from "./helper";
import { BodyPosition, Glasgow, HumanBody } from "./HUMAn";
import { getHuman, getHumans } from "./the_world";
import { whoAmI } from "./WegasHelper";

export interface HumanOverview {
	gcs: Glasgow,
	position: BodyPosition;
	colorful: number;
	cyanosis: boolean;
	looksDead: boolean;
	totalExternalBloodLosses_ml: number;
}



export function getFogOfWar() {
	const hId = whoAmI();
	const humans = getHumans();
	const me = humans.find(h => h.id === hId);

	const myLocation = me?.location;
	if (myLocation != null) {
		const x = myLocation.x;
		const y = myLocation.y;
		const radius = 100;

		return `<svg width="500px" height="500px" class="fogOfWar">                                                                                                                                                                                                                                  
	<path class="rect1176" style="opacity:0.8;fill:#ececec;"                                                                                                                                        
    d="M 0 0 L 0 500 L 500 500 L 500 0 L 0 0 z 
    M ${x - radius} ${y} 
    A 100 100 0 0 1 ${x + radius} ${y}                               
    A 100 100 0 0 1 ${x - radius} ${y}
    z " />
	</svg>`;

	} else {
		return '';
	}
}

interface PictoConfig {
	blood?: boolean;
	eyes: 'DEAD' | 'CLOSED' | 'OPEN_BAD' | 'OPEN_GOOD';
}

interface PictoConfig {
	className: string;
	bloodRatio: number
};

function getPicoClassNames(overview: HumanOverview) {
	const classes: string[] = ["mouth_neutral"];
	// Eyes
	if (overview.looksDead) {
		classes.push("eyes_dead")
	} else if (overview.gcs.eye > 3) {
		if (true) {
			classes.push("eyes_AlertMinus");
		} else {
			classes.push("eyes_AlertPlus");
		}
	} else {
		classes.push("eyes_N-A");
	}

	let bloodRatio = normalize(overview.totalExternalBloodLosses_ml / 500, {max: 1});
	if (overview.totalExternalBloodLosses_ml > 0) {
		classes.push("blood");
	}

	return {
		className: classes.join(" "),
		bloodRatio: bloodRatio,
	};
}

function getStanding(classes: string, bloodStyle: string) {
	return `<svg class="body_picto ${classes} width="176" height="496" viewBox="0 0 176 496" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="standing_position">
	    <path style="${bloodStyle} transform-origin:50% 95%;" class="blood"
       d="m 30.922255,441.74969 c 16.264053,-0.6557 32.429901,-3.36763 48.292074,-6.95282 0.524257,-1.38996 0.453248,-3.40692 0.74937,-4.85278 0.901964,-4.38593 5.109617,-3.27849 9.126906,-3.31173 4.62313,-0.0393 8.981865,0.55447 13.561185,0.93369 10.07419,0.83549 20.18918,0.6844 30.27697,1.40205 8.91388,0.63303 20.25566,0.78411 27.71914,6.58116 7.50579,5.82877 10.69364,13.24089 9.97902,22.7183 -0.87477,11.62128 -14.34531,17.11012 -23.79553,21.6985 -8.75071,4.24845 -17.44703,8.82323 -26.6102,12.14403 -4.23333,1.53349 -11.37803,4.71076 -16.20513,3.73627 -6.705045,-1.35219 -12.443166,-6.45123 -18.933679,-8.57696 -6.890882,-2.25567 -14.221415,-4.21672 -21.494536,-4.58536 -7.037432,-0.35807 -12.822388,2.22847 -19.359737,4.24542 -9.729725,3.00202 -21.943251,0.16921 -31.088287,-3.69397 -15.8349772,-6.68843 -17.7718574,-30.45978 -3.539867,-39.82993 6.333387,-4.1714 14.330194,-1.37485 21.322301,-1.65587 z"                                                                                                                                                                                                                                 
       fill="#c40000"                                                                                                                                                                                                                                                                       
       style="stroke-width:1.51083" />
        <g class="standing_body">
            <path d="M71.3465 69.4553C91.6137 69.1704 100.093 53.0507 99.8155 33.3169C99.5381 13.5832 88.7116 0.149543 68.4445 0.434438C48.1774 0.719334 37.3586 22.1844 37.636 41.9182C37.7921 53.0238 51.0794 69.7402 71.3465 69.4553Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M86.3711 75.8102C82.0574 74.6945 76.9957 74.0638 71.0593 74.0638C50.5335 74.0638 37.2021 77.9119 28.7852 84.9433C18.8432 91.1677 13.5243 109.197 11.0306 120.88C8.17542 134.257 4.92996 151.878 4.92996 176.197L4.92995 225.34L6.85547 269.507C4.64144 272.427 1.51204 280.181 0.931641 284C0.35124 287.819 4.00038 310.558 10.9316 312.5C13.2245 313.143 14.7664 313.141 15.8394 312.779C14.9308 326.57 14.3245 341.232 14.3627 351.5C14.4316 370 29.4316 443 29.4316 443C25.5435 443.969 22.1709 444.474 19.2825 444.907C13.9665 445.703 10.29 446.254 8.05586 449C4.6078 453.238 5.80743 464.508 9.93165 467.254C13.0721 469.345 32.9915 468.252 44.6619 467.611L44.666 467.611C48.3199 467.41 51.1646 467.254 52.4316 467.254C57.7454 467.254 52.4316 441.5 52.4316 441.5C52.4316 441.5 46.4316 372 46.4316 357C46.4316 345.399 57.5466 301.378 64.6613 274.264C66.4191 280.662 68.5229 287.973 70.7215 295.613L70.7217 295.614C77.5407 319.311 85.2725 346.179 86.4316 358.832C88.4316 380.663 92.4316 447 92.4316 447L92.2322 467.726H139.432C141.941 463.65 137.939 451.266 131.086 448.5C130.17 448.13 129.334 447.78 128.557 447.453C125.037 445.976 122.708 444.999 119.432 444.992C119.432 444.992 122.076 377.169 121.932 356C121.829 340.945 118.375 319.604 115.639 302.693C114.527 295.826 113.534 289.689 112.932 285C109.682 259.713 106.354 245.285 101.974 237.082C104.834 235.763 107.423 233.607 109.44 230.077C111.162 227.062 111.102 224.609 111.057 222.802C111.016 221.117 110.988 219.994 112.432 219.5C130.72 213.245 175.274 180.5 175.274 176.137C175.274 165.298 127.66 109.702 116.485 96.6548C115.663 95.6944 115.038 94.9646 114.644 94.5001C109.56 88.5089 97.7637 78.0587 86.3711 75.8102ZM109.717 135.786C108.549 148.639 106.138 159.477 103.913 169.473C102.104 177.604 100.418 185.178 99.6266 192.827C99.1562 197.372 98.3798 203.871 97.4778 211.137C98.504 210.954 99.6552 210.918 100.997 211.097C107.907 212.014 116.974 202.936 126.134 193.766C134.121 185.77 142.177 177.704 148.932 176.137L109.717 135.786ZM28.7888 234.376C24.3272 243.235 21.646 259.981 19.3978 276.678C18.4149 274.361 17.0275 272.682 16.1244 271.589C15.8771 271.29 15.666 271.034 15.5096 270.822C18.2337 257.965 18.8998 243.927 19.5617 229.979C20.3533 213.297 21.1387 196.745 25.4316 182.5L25.9962 178.704C29.754 200.4 32.3351 221.991 28.7888 234.376Z" fill="black"/>
        </g>
        <g class="eyes_N-A">
            <path class="eye_left" d="M94.6749 42.5507C92.8233 42.6991 91.4685 42.3023 89.8643 41.52" stroke="white" stroke-width="3" stroke-linecap="round"/>
            <path class="eye_right" d="M67.1501 37.5925C70.5148 42.0164 78.1681 42.452 81.8053 40.0194" stroke="white" stroke-width="3" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertMinus">
            <path class="eye_left_2" d="M88.1661 34.0531C89.6141 34.2381 91.8771 35.4484 92.3447 37.1251C92.6224 38.121 91.354 39.8298 90.8298 40.5511C90.0012 41.6913 88.6465 42.1674 87.4332 41.3464C84.1589 39.131 84.8382 33.3398 89.2468 33.7828" stroke="white" stroke-width="5" stroke-linecap="round"/>
            <path class="eye_right_2" d="M69.0007 34.2146C71.7506 32.5755 75.5727 32.6446 77.0209 35.801C78.0985 38.1499 76.064 41.1448 74.0798 41.9446C69.5127 43.7853 65.2035 34.061 71.5726 33.595" stroke="white" stroke-width="5" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertPlus">
            <path class="eye_left_3" d="M85.2848 30.6231C87.7731 30.8881 91.6995 32.7992 92.5689 35.513C93.0853 37.125 90.9819 39.9337 90.1133 41.1192C88.7402 42.9929 86.4387 43.8002 84.3265 42.4959C78.6265 38.9759 79.5541 29.5459 87.1253 30.157" stroke="white" stroke-width="7" stroke-linecap="round"/>
            <path class="eye_right_3" d="M59.6191 30.044C63.5441 27.599 69.0658 27.5903 71.2466 32.1078C72.8694 35.4694 70.0161 39.8522 67.1732 41.0634C60.6298 43.8512 54.131 29.9297 63.3159 29.0763" stroke="white" stroke-width="7" stroke-linecap="round"/>
        </g>
        <g class="eyes_dead">
            <g class="Group 3">
                <path class="Vector 25" d="M75.414 31.2358C73.2924 33.4231 72.1372 36.5591 70.7007 39.2615C69.3542 41.7944 68.3241 44.4987 66.9977 47.0407" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26" d="M64.9878 33.5598C67.8236 35.1256 70.204 37.2609 72.7236 39.3859C73.7804 40.2772 74.8891 41.0812 75.8422 42.0846" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
            <g class="Group 4">
                <path class="Vector 25_2" d="M92.967 32.4264C90.9276 33.9088 89.5416 36.3014 87.9877 38.3006C86.5313 40.1745 85.3084 42.233 83.867 44.1172" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26_2" d="M83.1389 34.3369C85.7947 35.5028 88.1551 37.247 90.632 38.9673C91.6709 39.6888 92.7399 40.3235 93.7088 41.1603" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
        </g>
        <path class="mouth_happy" d="M82.6887 54.8816C80.5699 56.9469 78.6111 58.2873 75.6984 58.3636C74.0178 58.4075 72.2741 58.1352 70.6778 57.5431C69.4304 57.0804 68.4223 55.9875 67.4361 55.0775" stroke="white" stroke-width="3" stroke-linecap="round"/>
        <path class="mouth_neutral" d="M74.3293 53.8318C77.9775 54.4233 82.3577 54.0927 85.6048 55.5243" stroke="white" stroke-width="3" stroke-linecap="round"/>
    </g>
</svg>`;
}


function getSitting(classes: string, bloodStyle: string) {
	return `<svg class="body_picto ${classes} width="291" height="301" viewBox="0 0 291 301" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="sitting_position">
        <path style="${bloodStyle}" class="blood" d="M166.466 265.073C177.231 264.639 187.931 262.844 198.43 260.471C198.777 259.551 198.73 258.216 198.926 257.259C199.523 254.356 202.308 255.089 204.967 255.067C208.027 255.041 210.912 255.434 213.943 255.685C220.611 256.238 227.306 256.138 233.983 256.613C239.883 257.032 247.39 257.132 252.33 260.969C257.298 264.827 259.408 269.733 258.935 276.006C258.356 283.698 249.44 287.331 243.185 290.368C237.393 293.18 231.637 296.208 225.572 298.406C222.77 299.421 218.041 301.524 214.846 300.879C210.408 299.984 206.61 296.609 202.314 295.202C197.753 293.709 192.901 292.411 188.087 292.167C183.429 291.93 179.6 293.642 175.273 294.977C168.833 296.964 160.749 295.089 154.696 292.532C144.215 288.105 142.933 272.371 152.353 266.169C156.545 263.408 161.838 265.259 166.466 265.073Z" fill="#C40000"/>
        <g class="body">
            <path d="M108.845 45.8995C102.945 66.2019 89.2075 80.0579 68.3564 73.9985C47.5054 67.9391 39.1323 46.6507 42.4526 35.2251C48.3525 14.9227 66.162 -3.67588 87.0131 2.38351C107.864 8.44289 114.745 25.5971 108.845 45.8995Z" fill="black"/>
            <path d="M30.0474 86.9381C23.4832 95.1831 18.4884 104.866 17 108.5C4.75034 138.412 2.80027 166.8 2.01008 189.043C1.67312 198.528 1.67024 206.507 1.66751 214.046C1.6653 220.167 1.6632 225.999 1.48253 232.113C1.26191 239.579 1.81554 245.139 2.99257 249.157C2.98705 252.413 3.89926 255.558 6.00001 258.5C21.0514 279.575 53.5324 265.289 67.2125 252.029C68.3304 251.359 69.3816 250.687 70.3546 250.022C79.2462 243.948 106.126 224.393 128.189 208.248L158.853 253.811L156.624 273.164H219.219C219.219 272.259 219.236 271.353 219.253 270.452C219.383 263.361 219.507 256.6 211.46 253.811C202.389 250.668 192.42 247.297 184.169 247.949C184.169 247.949 174.744 227.225 162.935 204.105L238.082 265.555L235.666 282.085L290.092 278.076C290.852 268.102 289.338 265.005 279.746 261.522C275.239 259.886 271.108 259.895 266.798 259.905C262.147 259.915 257.286 259.926 251.519 257.871C251.519 257.871 209.52 205.935 179.462 174.372C175.158 180.735 169.003 188.712 157.049 187.953C154.88 187.816 153.268 187.326 151.995 186.707C151.375 186.405 150.877 186.093 150.491 185.837L150.442 185.804C150.185 186.049 149.826 186.416 149.341 186.959C145.748 190.977 140.145 194.444 133.757 197.439C127.311 200.461 119.796 203.125 112.135 205.428C96.8098 210.035 80.6405 213.27 70.7102 215.025L69.2021 215.292L68.1017 214.227C57.7219 204.18 49.4233 185.8 43.2588 169.392C40.1447 161.103 37.5186 153.153 35.4171 146.786C33.2644 140.263 31.7574 135.718 30.8181 133.844C29.2767 130.77 28.0058 125.958 27.1999 120.622C26.3842 115.222 26.0055 109.019 26.3861 103.043C26.751 97.3117 27.827 91.5772 30.0474 86.9381Z" fill="black"/>
            <path d="M38.9031 77.9425C39.9596 77.5166 41.0973 77.2059 42.3206 77.0294C49.0371 76.0604 54.3307 77.4003 58.3985 80.616C62.3545 83.7433 64.7845 88.3612 66.4562 93.2389C68.1325 98.1298 69.1606 103.638 70.0778 108.825C70.1605 109.293 70.2423 109.758 70.3235 110.22C71.1608 114.98 71.9373 119.393 73.0614 123.137L73.0842 123.213L87.175 181.101C92.2256 179.567 99.3692 177.824 106.821 176.006C110.67 175.067 114.601 174.108 118.369 173.148C124.852 171.495 130.903 169.828 135.492 168.212C137.794 167.402 139.631 166.638 140.937 165.938C141.59 165.588 142.042 165.29 142.331 165.055C142.471 164.941 142.543 164.867 142.573 164.834C144.397 161.108 146.843 159.271 149.349 158.003C150.123 157.611 150.989 157.235 151.758 156.901L151.762 156.899C152.099 156.753 152.417 156.615 152.7 156.487C153.726 156.024 154.638 155.559 155.503 154.945L156.283 154.392H157.239C157.648 154.392 158.051 154.402 158.448 154.423C155.441 152.121 153.08 150.792 151.568 150.705C148.694 150.542 142.761 152.436 135.154 155.546C129.658 147.687 124.844 142.486 121.5 142C117.611 141.434 110.448 145.017 101.897 150.704L81.3603 155.43C83.5644 142.992 85.1753 132.118 85.8113 124.398C88.1111 96.4814 84.7767 85.0823 53.2203 74.2187C48.459 72.5796 43.5364 74.4012 38.9031 77.9425Z" fill="black"/>
            <path d="M163.072 158.263C161.299 157.711 159.357 157.392 157.239 157.392C155.781 158.426 154.29 159.073 152.84 159.702C149.939 160.961 147.204 162.147 145.234 166.222C143.313 170.194 124.185 174.86 107.305 178.978C99.827 180.802 92.7901 182.518 87.8854 184.019C86.8276 184.343 85.8691 184.657 85.0266 184.959L70.1881 124C69.01 120.076 68.2027 115.483 67.374 110.769C64.5554 94.7348 61.4898 77.2949 42.749 79.9987C24.7627 82.5935 28.1676 121.863 33.5 132.5C34.5583 134.611 36.139 139.401 38.2181 145.701C44.519 164.793 55.3976 197.756 70.1881 212.071C89.944 208.579 134.349 199.224 147.105 184.959C149.916 181.816 150.455 182.184 151.839 183.127C152.829 183.801 154.249 184.769 157.239 184.959C167.573 185.615 172.866 178.799 177.178 172.394C177.107 172.186 177.028 171.968 176.94 171.743C171.809 166.435 167.09 161.813 163.072 158.263Z" fill="black"/>
            <path d="M108.845 45.8995C102.945 66.2019 89.2075 80.0579 68.3564 73.9985C47.5054 67.9391 39.1323 46.6507 42.4526 35.2251C48.3525 14.9227 66.162 -3.67588 87.0131 2.38351C107.864 8.44289 114.745 25.5971 108.845 45.8995Z" stroke="black"/>
            <path d="M30.0474 86.9381C23.4832 95.1831 18.4884 104.866 17 108.5C4.75034 138.412 2.80027 166.8 2.01008 189.043C1.67312 198.528 1.67024 206.507 1.66751 214.046C1.6653 220.167 1.6632 225.999 1.48253 232.113C1.26191 239.579 1.81554 245.139 2.99257 249.157C2.98705 252.413 3.89926 255.558 6.00001 258.5C21.0514 279.575 53.5324 265.289 67.2125 252.029C68.3304 251.359 69.3816 250.687 70.3546 250.022C79.2462 243.948 106.126 224.393 128.189 208.248L158.853 253.811L156.624 273.164H219.219C219.219 272.259 219.236 271.353 219.253 270.452C219.383 263.361 219.507 256.6 211.46 253.811C202.389 250.668 192.42 247.297 184.169 247.949C184.169 247.949 174.744 227.225 162.935 204.105L238.082 265.555L235.666 282.085L290.092 278.076C290.852 268.102 289.338 265.005 279.746 261.522C275.239 259.886 271.108 259.895 266.798 259.905C262.147 259.915 257.286 259.926 251.519 257.871C251.519 257.871 209.52 205.935 179.462 174.372C175.158 180.735 169.003 188.712 157.049 187.953C154.88 187.816 153.268 187.326 151.995 186.707C151.375 186.405 150.877 186.093 150.491 185.837L150.442 185.804C150.185 186.049 149.826 186.416 149.341 186.959C145.748 190.977 140.145 194.444 133.757 197.439C127.311 200.461 119.796 203.125 112.135 205.428C96.8098 210.035 80.6405 213.27 70.7102 215.025L69.2021 215.292L68.1017 214.227C57.7219 204.18 49.4233 185.8 43.2588 169.392C40.1447 161.103 37.5186 153.153 35.4171 146.786C33.2644 140.263 31.7574 135.718 30.8181 133.844C29.2767 130.77 28.0058 125.958 27.1999 120.622C26.3842 115.222 26.0055 109.019 26.3861 103.043C26.751 97.3117 27.827 91.5772 30.0474 86.9381Z" stroke="black"/>
            <path d="M38.9031 77.9425C39.9596 77.5166 41.0973 77.2059 42.3206 77.0294C49.0371 76.0604 54.3307 77.4003 58.3985 80.616C62.3545 83.7433 64.7845 88.3612 66.4562 93.2389C68.1325 98.1298 69.1606 103.638 70.0778 108.825C70.1605 109.293 70.2423 109.758 70.3235 110.22C71.1608 114.98 71.9373 119.393 73.0614 123.137L73.0842 123.213L87.175 181.101C92.2256 179.567 99.3692 177.824 106.821 176.006C110.67 175.067 114.601 174.108 118.369 173.148C124.852 171.495 130.903 169.828 135.492 168.212C137.794 167.402 139.631 166.638 140.937 165.938C141.59 165.588 142.042 165.29 142.331 165.055C142.471 164.941 142.543 164.867 142.573 164.834C144.397 161.108 146.843 159.271 149.349 158.003C150.123 157.611 150.989 157.235 151.758 156.901L151.762 156.899C152.099 156.753 152.417 156.615 152.7 156.487C153.726 156.024 154.638 155.559 155.503 154.945L156.283 154.392H157.239C157.648 154.392 158.051 154.402 158.448 154.423C155.441 152.121 153.08 150.792 151.568 150.705C148.694 150.542 142.761 152.436 135.154 155.546C129.658 147.687 124.844 142.486 121.5 142C117.611 141.434 110.448 145.017 101.897 150.704L81.3603 155.43C83.5644 142.992 85.1753 132.118 85.8113 124.398C88.1111 96.4814 84.7767 85.0823 53.2203 74.2187C48.459 72.5796 43.5364 74.4012 38.9031 77.9425Z" stroke="black"/>
            <path d="M163.072 158.263C161.299 157.711 159.357 157.392 157.239 157.392C155.781 158.426 154.29 159.073 152.84 159.702C149.939 160.961 147.204 162.147 145.234 166.222C143.313 170.194 124.185 174.86 107.305 178.978C99.827 180.802 92.7901 182.518 87.8854 184.019C86.8276 184.343 85.8691 184.657 85.0266 184.959L70.1881 124C69.01 120.076 68.2027 115.483 67.374 110.769C64.5554 94.7348 61.4898 77.2949 42.749 79.9987C24.7627 82.5935 28.1676 121.863 33.5 132.5C34.5583 134.611 36.139 139.401 38.2181 145.701C44.519 164.793 55.3976 197.756 70.1881 212.071C89.944 208.579 134.349 199.224 147.105 184.959C149.916 181.816 150.455 182.184 151.839 183.127C152.829 183.801 154.249 184.769 157.239 184.959C167.573 185.615 172.866 178.799 177.178 172.394C177.107 172.186 177.028 171.968 176.94 171.743C171.809 166.435 167.09 161.813 163.072 158.263Z" stroke="black"/>
        </g>
        <g class="eyes_N-A">
            <path class="eye_left" d="M103.545 53.9695C101.721 53.6149 100.523 52.8685 99.188 51.6839" stroke="white" stroke-width="3" stroke-linecap="round"/>
            <path class="eye_right" d="M78.3651 41.7962C80.4171 46.9616 87.6716 49.438 91.8289 48.0726" stroke="white" stroke-width="3" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertMinus">
            <path class="eye_left_2" d="M101.938 46.226C103.184 46.9862 104.756 49.015 104.498 50.7365C104.345 51.759 102.489 52.8009 101.716 53.2453C100.494 53.9478 99.0633 53.8292 98.291 52.5843C96.2067 49.225 99.1916 44.2159 103.035 46.4206" stroke="white" stroke-width="5" stroke-linecap="round"/>
            <path class="eye_right_2" d="M84.3774 38.5474C87.557 38.1741 91.0177 39.7979 91.0507 43.2705C91.0752 45.8546 87.9951 47.7577 85.8573 47.6775C80.9367 47.4929 80.974 36.8566 86.9782 39.032" stroke="white" stroke-width="5" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertPlus">
            <path class="eye_left_3" d="M105.61 41.608C107.676 43.0199 110.229 46.5626 109.709 49.3645C109.401 51.0288 106.218 52.5065 104.891 53.1391C102.795 54.1391 100.385 53.7601 99.1427 51.611C95.7896 45.8113 101.073 37.9453 107.451 42.0692" stroke="white" stroke-width="7" stroke-linecap="round"/>
            <path class="eye_right_3" d="M83.2791 28.9427C87.8939 28.6482 92.7612 31.2557 92.5425 36.2672C92.3797 39.9965 87.791 42.5052 84.7135 42.2256C77.6302 41.582 78.4996 26.2429 86.9933 29.8412" stroke="white" stroke-width="7" stroke-linecap="round"/>
        </g>
        <g class="eyes_dead">
            <g class="Group 3">
                <path class="Vector 25" d="M93.0814 34.7958C90.2516 35.9261 87.9165 38.317 85.5017 40.1972C83.2384 41.9595 81.1938 44.0075 78.945 45.7862" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26" d="M82.6151 32.6597C84.5643 35.2471 85.8653 38.1682 87.2975 41.1368C87.8982 42.3819 88.582 43.5686 89.0424 44.8737" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
            <g class="Group 4">
                <path class="Vector 25_2" d="M108.618 43.0503C106.151 43.5706 103.909 45.1887 101.674 46.3792C99.5796 47.495 97.6227 48.8747 95.5375 50.006" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26_2" d="M98.8667 40.7809C100.815 42.9297 102.257 45.4857 103.816 48.0675C104.47 49.1503 105.186 50.1662 105.729 51.3257" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
        </g>
        <path class="mouth_happy" d="M95.1351 62.7138C92.3576 63.7339 90.0222 64.1576 87.3323 63.0378C85.7802 62.3917 84.2997 61.4311 83.0844 60.2388C82.1346 59.3071 81.6607 57.8978 81.1321 56.6643" stroke="white" stroke-width="3" stroke-linecap="round"/>
        <path class="mouth_neutral" d="M82.9225 59.6216C86.3711 60.9506 90.7257 61.5276 93.609 63.5962" stroke="white" stroke-width="3" stroke-linecap="round"/>
    </g>
</svg>`;
}

function getSupineDecubitus(classes: string, bloodStyle: string) {
	return `<svg class="body_picto ${classes} width="532" height="214" viewBox="0 0 532 214" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="backLying_position">
        <path style="${bloodStyle}" class="blood" d="M76.6288 78.8747C116.934 77.2462 156.995 70.4969 196.306 61.5722C197.606 58.1114 197.429 53.0937 198.165 49.4946C200.398 38.58 210.826 41.335 220.781 41.2513C232.24 41.155 243.041 42.6307 254.389 43.5764C279.354 45.6568 304.424 45.2782 329.424 47.0639C351.512 48.6416 379.62 49.0156 398.119 63.4449C416.717 77.9519 424.618 96.4001 422.849 119.986C420.679 148.911 387.297 162.57 363.877 173.99C342.192 184.565 320.64 195.951 297.931 204.216C287.44 208.033 269.734 215.941 257.771 213.516C241.155 210.148 226.932 197.457 210.847 192.168C193.773 186.553 175.606 181.675 157.583 180.754C140.141 179.863 125.803 186.303 109.602 191.322C85.4902 198.792 55.2211 191.742 32.5587 182.128C-6.68248 165.48 -11.4828 106.32 23.7869 82.9964C39.4824 72.6171 59.2992 79.5749 76.6288 78.8747Z" fill="#C40000"/>
        <g class="back_body">
            <path d="M300.437 98.8882C297.185 101.452 290.844 103.296 280.167 104.134C274.452 104.582 263.342 105.636 251.255 106.782C237.3 108.105 222.042 109.552 212.275 110.334C217.468 110.528 222.79 110.631 228.144 110.735C246.445 111.09 265.124 111.453 280.317 115.444C281.766 114.237 286.184 111.66 292.268 111.009C298.352 110.358 318.637 113.409 322.642 119.297L325.306 128.64C324.994 132.062 297.924 131.607 293.941 131.244C289.957 130.881 282.651 126.577 279.495 124.47L176.353 128.821C158.541 125.669 142.903 120.068 132.752 116.432C130.72 115.705 128.908 115.056 127.342 114.521C122.497 112.866 113.882 109.297 106.008 104.309C96.3591 101.478 86.0029 95.6847 86.5159 81.6518C87.5413 53.6016 110.019 40.4597 137.045 39.6356C158.666 38.9763 233.956 46.2692 270.137 50.31C270.149 50.3592 270.162 50.4085 270.175 50.4579C282.374 45.4394 299.879 42.646 312.562 42.1325C329.5 41.4467 366.32 37.2795 382.613 35.2816L474.369 36.1009C479.369 25.4288 490.616 3.42012 495.61 0.761906C500.603 -1.8963 509.805 3.35168 513.782 6.30795L491.014 80.911L463.277 72.446L412.948 72.2068L487.327 87.729C494.317 78.2405 509.651 58.856 515.068 57.2255C520.485 55.595 528.483 62.5411 531.805 66.2179L494.889 134.929L469.343 121.203L387.511 104.482C366.219 103.31 326.915 100.967 300.437 98.8882Z" fill="black"/>
            <path d="M48.4997 39.5788C68.934 39.5035 85.5326 48.4555 85.61 69.4422C85.6874 90.4288 68.2373 104.006 56.7374 104.049C36.303 104.124 14.1953 92.6925 14.1179 71.7058C14.0405 50.7191 28.0653 39.6541 48.4997 39.5788Z" fill="black"/>
        </g>
        <g class="eyes_N-A">
            <path class="eye_left" d="M50.0628 42C50.7376 43.7306 50.7473 45.1423 50.4595 46.9037" stroke="white" stroke-width="3" stroke-linecap="round"/>
            <path class="eye_right" d="M53.2319 69.7877C56.5009 65.2926 54.7166 57.8375 51.3405 55.0537" stroke="white" stroke-width="3" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertMinus">
            <path class="eye_left_2" d="M45.377 47.5422C45.4163 46.0829 46.3942 43.7103 48.0158 43.0774C48.979 42.7015 50.806 43.7927 51.5762 44.2421C52.7934 44.9526 53.4026 46.2529 52.7071 47.5422C50.8301 51.0216 45 50.9248 45 46.4939" stroke="white" stroke-width="5" stroke-linecap="round"/>
            <path class="eye_right_2" d="M47.454 66.5955C45.5482 64.0232 45.2347 60.2133 48.2305 58.4568C50.4599 57.1498 53.6432 58.8746 54.6373 60.7689C56.9255 65.129 47.6808 70.389 46.5803 64.0984" stroke="white" stroke-width="5" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertPlus">
            <path class="eye_left_3" d="M42.7462 47.7896C42.823 45.2884 44.4328 41.2292 47.0733 40.1577C48.6418 39.5213 51.6011 41.407 52.8486 42.1839C54.8205 43.4118 55.799 45.6459 54.6575 47.8504C51.5771 53.7995 42.1041 53.5852 42.1428 45.9895" stroke="white" stroke-width="7" stroke-linecap="round"/>
            <path class="eye_right_3" d="M44.1031 73.426C41.3693 69.6965 40.9445 64.1911 45.2848 61.676C48.5145 59.8045 53.0999 62.3194 54.5219 65.0629C57.7949 71.3775 44.4028 78.9071 42.8596 69.8127" stroke="white" stroke-width="7" stroke-linecap="round"/>
        </g>
        <g class="eyes_dead">
            <g class="Group 3">
                <path class="Vector 25" d="M42.0408 58.7471C43.9948 61.0854 46.993 62.5616 49.5307 64.2723C51.9093 65.8757 54.4914 67.1825 56.8811 68.767" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26" d="M43.264 69.3589C45.1173 66.702 47.4893 64.5575 49.8657 62.2734C50.8624 61.3154 51.7777 60.2967 52.8751 59.4534" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
            <g class="Group 4">
                <path class="Vector 25_2" d="M45.0569 41.4143C46.3184 43.5972 48.5533 45.2253 50.3794 46.9794C52.0911 48.6234 54.0107 50.0545 55.7342 51.6847" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26_2" d="M45.9312 51.3881C47.3679 48.8684 49.349 46.7029 51.3183 44.4191C52.1443 43.4612 52.8871 42.4643 53.8205 41.588" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
        </g>
        <path class="mouth_happy" d="M65.397 50C67.2298 52.3228 68.3585 54.4107 68.1304 57.3156C67.9987 58.9915 67.5459 60.6973 66.7904 62.2231C66.2001 63.4154 65.0079 64.3039 64 65.1898" stroke="white" stroke-width="3" stroke-linecap="round"/>
        <path class="mouth_neutral" d="M68 59.2102C67.0695 55.6334 65 51.7589 65 48.2102" stroke="white" stroke-width="3" stroke-linecap="round"/>
    </g>
</svg>`;
}

function getProneDecubitus(classes: string, bloodStyle: string) {
	return `<svg class="body_picto ${classes} width="522" height="200" viewBox="0 0 522 200" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="ventral_position">
        <path style="${bloodStyle}" class="blood" d="M77.6288 64.8747C117.934 63.2462 157.995 56.4969 197.306 47.5722C198.606 44.1114 198.429 39.0937 199.165 35.4946C201.398 24.58 211.826 27.335 221.781 27.2513C233.24 27.155 244.041 28.6307 255.389 29.5764C280.354 31.6568 305.424 31.2782 330.424 33.0639C352.512 34.6416 380.62 35.0156 399.119 49.4449C417.717 63.9519 425.618 82.4001 423.849 105.986C421.679 134.911 388.297 148.57 364.877 159.99C343.192 170.565 321.64 181.951 298.931 190.216C288.44 194.033 270.734 201.941 258.771 199.516C242.155 196.148 227.932 183.457 211.847 178.168C194.773 172.553 176.606 167.675 158.583 166.754C141.141 165.863 126.803 172.303 110.602 177.322C86.4902 184.792 56.2211 177.742 33.5587 168.128C-5.68248 151.48 -10.4828 92.3199 24.7869 68.9964C40.4824 58.6171 60.2992 65.5749 77.6288 64.8747Z" fill="#C40000"/>
        <g class="body_ventral">
            <path d="M454.451 63.8731L372.879 62.1522C378.39 61.9439 383.3 61.7804 387.103 61.6681L477.685 47.0079C484.239 56.803 498.679 76.8618 504.017 78.7358C509.354 80.6099 517.659 74.033 521.144 70.5103L487.376 0.19873L461.234 12.7535L378.73 25.7532C356.301 25.9713 313.906 26.5813 287.47 27.5391C283.737 26.1366 278.182 25.2553 270.319 25.0342C264.588 24.8731 253.44 24.3782 241.31 23.8397C225.589 23.1418 208.218 22.3706 198.858 22.1583L198.275 22.1451C176.724 21.6554 139.721 20.8146 110.292 29.8582C109.31 30.1599 107.977 30.47 106.41 30.8347C96.2809 33.1917 76.3544 37.8287 78.0386 57.2016C80.4473 84.9072 103.154 96.9403 129.865 96.6419C132.226 97.4254 134.456 98.1071 136.463 98.674L175.136 103.816C162.413 106.067 148.25 111.687 136.772 116.241C129.926 118.957 124.036 121.294 119.977 122.311C111.131 124.528 106.812 124.735 100.987 125.015C97.8707 125.164 94.3229 125.335 89.4198 125.845C78.1667 127.015 63.5586 143.321 62.5113 150.113C73.9489 146.388 111.205 135.85 120.227 135.651C141.757 135.176 200.862 120.085 232.105 104.887L220.453 92.4606C218.455 90.4634 216.066 88.6131 213.382 86.8963C230.189 84.4567 246.395 81.9657 258.891 79.9581C270.964 85.8287 289.635 89.3939 303.002 90.2816C319.917 91.4048 356.617 96.5221 372.852 98.9404L464.6 100.493C469.322 111.29 479.997 133.582 484.92 136.369C489.843 139.155 499.178 134.147 503.23 131.294L482.397 56.1277L454.451 63.8731Z" fill="black"/>
            <path d="M35.5784 101.984C56.01 101.641 72.4218 92.3509 72.0693 71.3671C71.7169 50.3832 53.9924 37.1658 42.494 37.359C22.0624 37.7021 0.193379 49.5842 0.54583 70.5681C0.898282 91.552 15.1467 102.327 35.5784 101.984Z" fill="black"/>
        </g>
        <g class="eyes_N-A">
            <path class="eye_left" d="M30.0628 97.7877C30.7376 96.0571 30.7473 94.6454 30.4595 92.8839" stroke="white" stroke-width="3" stroke-linecap="round"/>
            <path class="eye_right" d="M33.2319 70C36.5009 74.4951 34.7166 81.9502 31.3405 84.734" stroke="white" stroke-width="3" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertMinus">
            <path class="eye_left_2" d="M26.377 94.4578C26.4163 95.9171 27.3942 98.2897 29.0158 98.9226C29.979 99.2985 31.806 98.2073 32.5762 97.7579C33.7934 97.0474 34.4026 95.7471 33.7071 94.4578C31.8301 90.9784 26 91.0752 26 95.5061" stroke="white" stroke-width="5" stroke-linecap="round"/>
            <path class="eye_right_2" d="M28.454 75.4045C26.5482 77.9768 26.2347 81.7867 29.2305 83.5432C31.4599 84.8502 34.6432 83.1254 35.6373 81.2311C37.9255 76.871 28.6808 71.611 27.5803 77.9016" stroke="white" stroke-width="5" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertPlus">
            <path class="eye_left_3" d="M23.7462 94.2762C23.823 96.7774 25.4328 100.837 28.0733 101.908C29.6418 102.545 32.6011 100.659 33.8486 99.882C35.8205 98.6541 36.799 96.4199 35.6575 94.2155C32.5771 88.2664 23.1041 88.4806 23.1428 96.0763" stroke="white" stroke-width="7" stroke-linecap="round"/>
            <path class="eye_right_3" d="M25.1031 68.6399C22.3693 72.3694 21.9445 77.8748 26.2848 80.3898C29.5145 82.2614 34.0999 79.7465 35.5219 77.003C38.7949 70.6883 25.4028 63.1588 23.8596 72.2532" stroke="white" stroke-width="7" stroke-linecap="round"/>
        </g>
        <g class="eyes_dead">
            <g class="Group 3">
                <path class="Vector 25" d="M23.5318 80.2451C25.8146 78.2267 29.0005 77.2174 31.7663 75.907C34.3586 74.6789 37.1077 73.7746 39.7081 72.5669" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26" d="M26.3342 69.9372C27.7676 72.8423 29.7908 75.3186 31.7973 77.9335C32.6389 79.0303 33.3908 80.1749 34.3492 81.1734" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
            <g class="Group 4">
                <path class="Vector 25_2" d="M23.9113 97.8343C25.4862 95.8655 27.9402 94.5913 30.009 93.1313C31.9481 91.7629 34.0608 90.6363 36.0095 89.2833" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26_2" d="M26.2732 88.1048C27.3153 90.8116 28.9489 93.2499 30.553 95.8036C31.2258 96.8746 31.8105 97.9718 32.6018 98.9782" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
        </g>
        <path class="mouth_happy" d="M46.397 81C48.2298 83.3228 49.3585 85.4107 49.1304 88.3156C48.9987 89.9915 48.5459 91.6973 47.7904 93.2231C47.2001 94.4154 46.0079 95.3039 45 96.1898" stroke="white" stroke-width="3" stroke-linecap="round"/>
        <path class="mouth_neutral" d="M49.0001 82.0001C48.0697 85.5769 46.0001 89.4515 46.0001 93.0001" stroke="white" stroke-width="3" stroke-linecap="round"/>
    </g>
</svg>`;
}

function getPls(classes: string, bloodStyle: string) {
	return `<svg class="body_picto ${classes}" width="558" height="215" viewBox="0 0 558 215" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="pls_position">
        <path style="${bloodStyle}" class="blood" d="M76.6288 64.8747C116.934 63.2462 156.995 56.4969 196.306 47.5722C197.606 44.1114 197.429 39.0937 198.165 35.4946C200.398 24.58 210.826 27.335 220.781 27.2513C232.24 27.155 243.041 28.6307 254.389 29.5764C279.354 31.6568 304.424 31.2782 329.424 33.0639C351.512 34.6416 379.62 35.0156 398.119 49.4449C416.717 63.9519 424.618 82.4001 422.849 105.986C420.679 134.911 387.297 148.57 363.877 159.99C342.192 170.565 320.64 181.951 297.931 190.216C287.44 194.033 269.734 201.941 257.771 199.516C241.155 196.148 226.932 183.457 210.847 178.168C193.773 172.553 175.606 167.675 157.583 166.754C140.141 165.863 125.803 172.303 109.602 177.322C85.4902 184.792 55.2211 177.742 32.5587 168.128C-6.68248 151.48 -11.4828 92.3199 23.7869 68.9964C39.4824 58.6171 59.2992 65.5749 76.6288 64.8747Z" fill="#C40000"/>
        <g class="body_pls">
            <path d="M129.613 55.7032C136.232 52.698 141.21 47.0112 143.146 37.6177C145.088 28.1965 142.763 19.6519 138.645 13.1729C134.465 6.59438 128.659 2.46965 124.04 1.51761C114.531 -0.442264 104.168 0.225781 95.7908 3.71913C87.4791 7.18499 81.2737 13.3362 79.3981 22.4365C77.423 32.0193 79.1701 39.6541 83.4324 45.3468C87.7368 51.0958 94.8895 55.2391 104.395 57.1983C114.03 59.1841 122.844 58.7769 129.613 55.7032Z" fill="black"/>
            <path d="M119.788 61.2301C127.623 60.5133 134.46 57.6882 139.324 52.3044L142.547 67.4189L148.018 102.73C148.134 103.479 148.791 104.024 149.55 103.999C150.308 103.974 150.928 103.386 150.994 102.63L150.996 102.607L151.002 102.542C151.006 102.484 151.013 102.4 151.022 102.29C151.039 102.069 151.064 101.742 151.093 101.318C151.151 100.468 151.228 99.2225 151.303 97.633C151.452 94.4542 151.594 89.8964 151.562 84.3665C151.5 73.3474 150.751 58.4427 148.003 42.8873C148.003 42.8415 148.003 42.7954 148.003 42.749C148.001 42.4849 148 42.235 148 42L148 41.9531L148.001 41.8906C148.001 41.8553 148.001 41.82 148.002 41.7847C148.001 40.8056 148 39.719 148 38.5C148 13.7 169 6.27631 176.5 4.49999C199.703 -0.995371 230.387 4.46771 253.112 8.51352C260.161 9.76851 266.444 10.8871 271.5 11.5C280.814 12.6289 298.064 15.1388 313.678 17.4105L313.68 17.4108L313.684 17.4113L315.503 17.676C317.145 18.2921 319.271 18.7148 321.84 18.9914C329.778 19.8463 335.696 21.9723 340.194 24.9188C344.686 27.8616 347.84 31.674 350.179 36.0231C352.528 40.3887 354.054 45.2919 355.276 50.4034C355.886 52.9567 356.416 55.5446 356.938 58.1349L357.128 59.08L357.13 59.0891L357.131 59.0963L357.132 59.1021L357.133 59.1069C357.334 60.1071 357.535 61.1071 357.74 62.1025C357.616 62.0964 357.493 62.0906 357.371 62.0848L357.071 62.071C361.689 79.3447 373.381 127.1 378.993 150.239L489.983 151.726L513.049 146.74L522.104 210.772C519.065 213.732 506.409 218.057 500.106 210.772C493.803 203.487 489.564 183.057 489.635 177.724L354.553 182.915L309.843 86.3073C309.275 85.0521 308.69 83.6862 308.102 82.2294C269.168 85.0633 214.787 88.2289 197 86.9114C191.248 86.4853 185.724 85.4507 180.59 83.7865C180.455 85.2454 180.321 86.686 180.192 88.0945L180.126 88.8207C179.692 93.5556 179.305 97.8961 179.007 101.314C176.349 115.095 165.897 140.019 145.346 129.463C143.227 128.374 141.252 126.734 139.415 124.634C128.958 112.685 122.929 85.8612 119.788 61.2301Z" fill="black"/>
            <path d="M147.251 59.4004C147.215 59.8181 147.176 60.255 147.136 60.713L147.136 60.7143C147.049 61.7048 146.953 62.794 146.848 64C146.589 66.9581 146.38 69.4231 146.211 71.4737L148.566 86.6731C148.568 85.9305 148.567 85.1669 148.562 84.3835C148.522 77.3539 148.2 68.7406 147.251 59.4004Z" fill="black"/>
            <path d="M149.5 102.5L150.994 102.63C150.994 102.631 150.994 102.631 149.5 102.5Z" fill="black"/>
            <path d="M178.432 110.966C176.606 116.13 173.97 121.528 170.424 125.793C167.498 129.314 163.855 132.177 159.428 133.385C154.958 134.605 149.938 134.07 144.432 131.242C142.506 130.253 140.719 128.878 139.057 127.189L138.992 127.65C125.26 125.294 96.8338 119.254 92.9935 113.935C89.1533 108.616 75.6619 97.9842 69.3962 93.3333L75.744 108.792L56.5778 103.077L49.8784 106.297L51.7203 119.368C56.9017 124.739 72.5776 138.154 82.3027 135.791C85.079 135.117 86.6826 133.639 87.9908 132.433C89.8631 130.708 91.1304 129.54 94.3651 132.083C108.905 143.514 146.848 153.513 166.238 153.513C173.403 143.62 176.7 126.933 178.432 110.966Z" fill="black"/>
            <path d="M425.986 68.7631C411.126 66.9647 379.194 63.3893 360.838 62.2733C360.579 61.0269 360.325 59.7653 360.069 58.4909L359.879 57.5429C359.357 54.9515 358.817 52.3168 358.193 49.706C356.946 44.4893 355.348 39.2988 352.821 34.6019C350.286 29.8885 346.814 25.6697 341.838 22.4093C341.042 21.8881 340.21 21.3926 339.339 20.9244C365.614 24.0583 402.685 29.1226 423.071 32.0003L506.592 31.4719L534.316 22.9632L557.201 97.5304C553.229 100.493 544.035 105.755 539.037 103.105C534.04 100.455 522.758 78.4637 517.741 67.7995L425.986 68.7631Z" fill="black"/>     
        </g>
        <g class="eyes_dead">
            <g class="exe_right">
                <path class="Vector 25" d="M97.5316 40.245C99.8145 38.2265 103 37.2172 105.766 35.9069C108.359 34.6788 111.108 33.7745 113.708 32.5668" stroke="white" stroke-width="3" stroke-linecap="round"/>                                                                               
                <path class="Vector 26" d="M100.334 29.9371C101.768 32.8421 103.791 35.3184 105.797 37.9334C106.639 39.0302 107.391 40.1748 108.349 41.1733" stroke="white" stroke-width="3" stroke-linecap="round"/>                                                                          
            </g>
            <g class="eye_left">
                <path class="Vector 25_2" d="M97.9113 57.8342C99.4862 55.8654 101.94 54.5913 104.009 53.1313C105.948 51.7628 108.061 50.6362 110.009 49.2832" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <path class="Vector 26_2" d="M100.273 48.1047C101.315 50.8115 102.949 53.2499 104.553 55.8035C105.226 56.8745 105.81 57.9717 106.602 58.9781" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </g>
        </g>
        <g class="eyes_N-A">
            <path class="eye_left_2" d="M107.063 54.7876C107.738 53.057 107.747 51.6453 107.46 49.8839" stroke="white" stroke-width="3" stroke-linecap="round"/>
            <path class="eye_right" d="M110.232 27C113.501 31.4951 111.717 38.9501 108.341 41.7339" stroke="white" stroke-width="3" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertMinus">
            <path class="eye_left_3" d="M103.377 51.4578C103.416 52.9171 104.394 55.2897 106.016 55.9226C106.979 56.2985 108.806 55.2073 109.576 54.7579C110.793 54.0474 111.403 52.7471 110.707 51.4578C108.83 47.9784 103 48.0752 103 52.5061" stroke="white" stroke-width="5" stroke-linecap="round"/>
            <path class="eye_right_2" d="M105.454 32.4045C103.548 34.9768 103.235 38.7867 106.231 40.5432C108.46 41.8502 111.643 40.1254 112.637 38.2311C114.926 33.871 105.681 28.611 104.58 34.9016" stroke="white" stroke-width="5" stroke-linecap="round"/>
        </g>
        <g class="eyes_AlertPlus">
            <path class="eye_left_4" d="M98.6126 49.2134C98.6765 51.715 100.266 55.7824 102.901 56.8673C104.466 57.5117 107.435 55.6411 108.686 54.8706C110.664 53.6528 111.654 51.4236 110.524 49.2134C107.474 43.2487 98 43.4146 98 51.0104" stroke="white" stroke-width="7" stroke-linecap="round"/>
            <path class="eye_right_3" d="M100.1 23.5843C97.3473 27.2998 96.8945 32.803 101.222 35.3401C104.442 37.2281 109.04 34.7367 110.476 32.0004C113.781 25.7025 100.428 18.1048 98.8382 27.1912" stroke="white" stroke-width="7" stroke-linecap="round"/>
        </g>
        <path class="mouth_happy" d="M124.397 37C126.23 39.3228 127.359 41.4107 127.13 44.3156C126.999 45.9915 126.546 47.6973 125.79 49.2231C125.2 50.4154 124.008 51.3039 123 52.1898" stroke="white" stroke-width="3" stroke-linecap="round"/>
        <path class="mouth_neutral" d="M123 42.7876C122.379 45.7141 121 48.8842 121 51.7876" stroke="white" stroke-width="3" stroke-linecap="round"/>
     </g>
	</svg>`;
}


function getPainIcon( pain : number, overview: HumanOverview): string {
	if (overview.looksDead || overview.gcs.total < 13){
		return "/patient/pain/sleepy_face.png";
	}

	if (pain <= 2) {
		return "/patient/pain/no_pain.png";
	} else if (pain <= 4) {
		return "/patient/pain/low_pain.png";
	} else if (pain <= 6) {
		return "/patient/pain/mild_pain.png";
	} else if (pain <= 8) {
		return "/patient/pain/high_pain.png";
	} else {
		return "/patient/pain/horrible_pain.png";
	}
}


export function getBodyPicto(overview: HumanOverview): string {
	const {className, bloodRatio} = getPicoClassNames(overview);

	const bloodStyle = `transform: scale(${bloodRatio});`;

	switch (overview.position) {
		case 'STANDING':
			return getStanding(className, bloodStyle);
		case 'SITTING':
			return getSitting(className, bloodStyle);
		case 'SUPINE_DECUBITUS':
			return getSupineDecubitus(className, bloodStyle);
		case 'PRONE_DECUBITUS':
			return getProneDecubitus(className, bloodStyle);
		case 'RECOVERY':
			return getPls(className, bloodStyle);
	}
}

const colorfulModel: Point[] = [
	{ x: 0.6, y: 0 },
	{ x: 0.85, y: 1 }
]

export function getOverview(human: HumanBody): HumanOverview {

	const bloodRatio = human.state.vitals.cardio.totalVolume_mL / human.meta.initialBloodVolume_mL;
	
	const looksDead = (human.state.vitals.cardiacArrest ?? 0) > 0;
	
	return {
		gcs: human.state.vitals.glasgow,
		position: human.state.variables.bodyPosition,
		colorful: looksDead ? 0 : interpolate(bloodRatio, colorfulModel),
		cyanosis: human.state.vitals.respiration.SaO2 < 0.85,
		looksDead: looksDead,
		totalExternalBloodLosses_ml: human.state.vitals.cardio.totalExtLosses_ml,
	};
}


export function getVisualOverview() {

	const id = I18n.toString(Variable.find(gameModel, 'currentPatient'));

	let output = `<h1>${id}</h1>`;


	const human = getHuman(id);
	if (human != null) {
		const overview = getOverview(human);
		if (overview) {
			const painPath = getPainIcon(human.state.vitals.pain, overview);
			const painURL = Helpers.getFilePath(painPath);
			output += "<div style='display: flex;'>";
			output += `<div>${getBodyPicto(overview)}</div>`;

			const tickLeft = (overview.colorful * 100) -5;
			const html = `
			<p>Cyanosis: ${overview.cyanosis}</p>
			<p>Pallor: Pale <span class='face-color'><span class='tick' style="left:${tickLeft}px"></span></span> Vivid</p>`;

			output += "<div>"
				+ `<p>Pain: <img width="48px" src='${painURL}'></p>`
				+ html
				+ "</div>";

			output += "</div>";
		}
	}
	return output;
}
